{
 "add_total_row": 0,
 "add_translate_data": 0,
 "columns": [],
 "creation": "2025-12-09 15:49:56.099239",
 "disabled": 0,
 "docstatus": 0,
 "doctype": "Report",
 "filters": [],
 "idx": 0,
 "is_standard": "Yes",
 "letterhead": null,
 "modified": "2025-12-17 09:04:25.191158",
 "modified_by": "Administrator",
 "module": "Gym Management",
 "name": "Revenue Report",
 "owner": "Administrator",
 "prepared_report": 0,
 "query": "SELECT \n    DATE_FORMAT(start_date, '%%Y-%%m') AS \"Month:Data:150\",\n    SUM(amount) AS \"Total Revenue:Currency:150\"\nFROM \n    `tabGym Membership`\nWHERE\n    status = 'Active'  -- or 'Expired'\nGROUP BY \n    DATE_FORMAT(start_date, '%%Y-%%m')\nORDER BY \n    DATE_FORMAT(start_date, '%%Y-%%m') ASC;\n",
 "ref_doctype": "Gym Membership",
 "report_name": "Revenue Report",
 "report_script": "import frappe\nfrom frappe.utils import flt, getdate\n\ndata = frappe.db.get_all(\n    'Income Entry',\n    fields=['date', 'amount']\n)\n\n# Aggregate by month\nmonthly_revenue = {}\nfor d in data:\n    month = getdate(d['date']).strftime(\"%Y-%m\")  # Python way\n    monthly_revenue[month] = monthly_revenue.get(month, 0) + flt(d['amount'])\n\n# Convert to list for report\nreport_data = []\nfor month, total in sorted(monthly_revenue.items()):\n    report_data.append({\n        'Month': month,\n        'Total Revenue': total\n    })\n\nreport_data\n",
 "report_type": "Query Report",
 "roles": [
  {
   "role": "System Manager"
  },
  {
   "role": "Gym Admin"
  },
  {
   "role": "Gym Member"
  },
  {
   "role": "Gym Trainer"
  }
 ],
 "timeout": 0
}