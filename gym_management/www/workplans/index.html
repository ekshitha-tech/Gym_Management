{% extends "templates/web.html" %}
{% block page_content %}

{# ================= DETAIL VIEW ================= #}
{% if plan %}
    <h2>{{ plan.plan_name }}</h2>

    <p><b>Level:</b> {{ plan.level or "Not specified" }}</p>
    <p>{{ plan.description }}</p>

    <hr>

    <h4>Exercises</h4>

    {% if plan.gym_workout_plan_exercise %}
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Exercise</th>
                <th>Sets</th>
                <th>Reps</th>
                <th>Duration</th>
                <th>Rest</th>
            </tr>
        </thead>
        <tbody>
            {% for e in plan.gym_workout_plan_exercise %}
            <tr>
                <td>{{ e.exercise_name }}</td>
                <td>{{ e.sets }}</td>
                <td>{{ e.reps }}</td>
                <td>{{ e.duration }}</td>
                <td>{{ e.rest_time }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p>No exercises added.</p>
    {% endif %}

    <a href="/workout-plans" class="btn btn-secondary mt-3">
        ‚Üê Back to all plans
    </a>

{# ================= LIST VIEW ================= #}
{% else %}
    <h2 class="mt-4 mb-4">Workout Plans</h2>

    <div class="row">
        {% for p in plans %}
        <div class="col-sm-4 mb-4">
            <div class="card p-3">
                <h4>{{ p.plan_name }}</h4>
                <p><b>Level:</b> {{ p.level or "Not specified" }}</p>
                <p>{{ p.description or "No description available" }}</p>

               <a href="/workout-plans?plan={{ p.route }}" class="btn btn-primary">
    View Plan
</a>

            </div>
        </div>
        {% endfor %}
    </div>
{% endif %}

{% endblock %}
